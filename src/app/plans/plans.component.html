<app-navbar></app-navbar>
<div class="plans-table">
  <div class="table-title">
    NDW - L2 Rules
  </div>
  <!-- <app-search (submissionGroupFilterEvent)="filterPlansTable($event)"></app-search> -->
  <div class="search">
    <h4>
      Search Filters
    </h4>
    <div>
      <ng-select
        class="custom"
        [(ngModel)]="selectedSubmissionGroupOption"
        placeholder="Submission Group"
        (change)="handleSubmissionGroupChange(selectedSubmissionGroupOption)"
      >
        <ng-option
          *ngFor="let submissionGroupOption of options.submissionGroupOptions"
          [value]="submissionGroupOption"
        >
          {{submissionGroupOption}}
        </ng-option>
      </ng-select>
      <button (click)="search()">Search</button>
      
      <ng-select class="custom" [(ngModel)]="selectedPaidThroughPeriodOption" placeholder="Paid Through Period">
        <ng-option *ngFor="let paidThroughPeriodOption of options.paidThroughPeriodOptions" [value]="paidThroughPeriodOption">
          {{paidThroughPeriodOption}}
        </ng-option>
      </ng-select>
      <ng-select class="custom" [(ngModel)]="selectedModeOption" placeholder="Mode">
        <ng-option *ngFor="let modeOption of options.modeOptions" [value]="modeOption">
          {{modeOption}}
        </ng-option>
      </ng-select>
      <ng-select class="custom" [(ngModel)]="selectedSubmissionControlOption" placeholder="Submission Control">
        <ng-option *ngFor="let submissionControlOption of options.submissionControlOptions" [value]="submissionControlOption">
          {{submissionControlOption}}
        </ng-option>
      </ng-select>
      <ng-select class="custom last-select" [(ngModel)]="selectedCategoryOption" placeholder="Category">
        <ng-option *ngFor="let categoryOption of options.categoryOptions" [value]="categoryOption">
          {{categoryOption}}
        </ng-option>
      </ng-select>
    </div>
  </div>
  <table>
    <colgroup span="12"></colgroup>
    <thead>
      <tr>
        <th *ngFor="let header of headers; index as i;">{{header}}</th>
      </tr>
    </thead>
    <tbody>
      <!-- {plans.map(({group, planName, throughPeriod, controlNumber, dateReceived, category, mode, status, currentState, lastUpdated, dueDate, reportScore}, idx) => ( -->
        <tr *ngFor="let plan of plans; index as i;" [ngClass]="selectedRow === i ? 'selected' : ''" (click)="selectRow(i)">
          <td>{{plan.group}}</td>
          <td>{{plan.planName}}</td>
          <td>{{plan.throughPeriod}}</td>
          <td>
            <a routerLink="/" target='_blank' rel='noopener noreferrer'>
              {{plan.controlNumber}}
            </a>
          </td>
          <!-- <td>{{plan.dateReceived}}</td> -->
          <td>{{plan.dateReceived | date:'MM/dd/yyyy'}}</td>
          <td>{{plan.category}}</td>
          <td>{{plan.mode}}</td>
          <td>{{plan.status}}</td>
          <td>{{plan.currentState}}</td>
          <td>{{plan.lastUpdated | date:'MM/dd/yyyy'}}</td>
          <td>{{plan.dueDate | date:'MM/dd/yyyy'}}</td>
          <td>{{plan.reportScore}}</td>
        </tr>
    </tbody>
  </table>
</div>
